[Unit]
Description=Zookeeper %i

[Service]
Type=simple
EnvironmentFile=/etc/environment
Environment="TAG=3.4.5"
ExecStartPre=/usr/bin/docker pull emmanuel/zookeeper-1:$TAG
ExecStart=/usr/bin/docker run --name zookeeper \
                              --env ZK_SERVER_NUMBER=%i \
                              -p 2181 -p 2888 -p 3888 \
                              --dns-search=prod.cluster.local \
                              emmanuel/zookeeper-1:$TAG

[X-Fleet]
X-Conflicts=zookeeper@*.service
